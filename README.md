## Запуск 

agent: `cd agent && npm i && npm start` 

server: `cd server && npm i && npm start`

## Комментарии

* Пользовательский интерфейс на localhost:8000
* Агенты поднимаются на свободных портах 3000-3100

---

## Задача

Сделать простую систему continuous integration.

## Пользовательский интерфейс

Главная страница: запуск сборки + список билдов

Инпуты для хэша коммита и сборочной команды, кнопка "Запустить сборку"

Список прошлых сборок со статусами (Успешно/Неуспешно)

С каждой сборки -- ссылка на страницу с подробной информацией про нее

### Страница билда (сборки):

Все данные про конкретную сборку: хеш коммита, дата старта и дата окончания, статус, вывод сборочной команды.

Архитектура

Один процесс-сервер и несколько процессов-агентов.

Сервер рисует пользовательский интерфейс, передает задание на сборку одному из агентов, принимает результаты сборки и хранит их на своей локальной файловой системе.

Для людей предоставляет страницы

`/`

-- главная страница

`/build/12345`

-- страница конкретной сборки

Для агентов предоставляет http-ручки:

`/notify_agent`

-- зарегистрировать агента . В параметрах хост и порт, на котором запущен агент

`/notify_build_result`

-- сохранить результаты сборки. В параметрах -- id сборки, статус, stdout и stderr процесса.

Из конфига читает порт, на котором слушать и репозиторий, который чекаутить.

Агент при запуске регистрируется в сервере (ручка /notify_agent), принимает задания на сборку, отсылает результаты на сервер

Предоставляет ручки для сервера:

`/build`

-- запустить сборку. В параметрах -- id сборки, адрес репозитория, хэш коммита, команда, которую надо запустить

Обработка задания на сборку: зачекаутить нужный коммит, запустить сборочную команду. Статус завершения команды == статус тестов. Передать статус, stderr и stdout на сервер ручкой /notify_build_result

Из конфига читает порт, на котором слушать и хост-порт, на котором слушает сервер.

Требования

Ожидаем репозиторий с README, каталогами server и agent.

С каждым из каталогов можно сделать cd $dir && npm install && npm start, и запустится соответствующий процесс.

Сервер должен генерировать уникальные номера сборок.

Сервер должен максимально утилизировать имеющихся агентов.

Сервер должен корректно обрабатывать ситуацию, когда агент прекратил работать между сборками.

Сервер должен корректно обрабатывать ситуацию, когда агент прекратил работать в процессе выполнения сборки.

Сервер должен корректно обрабатывать ситуацию, когда агенты не справляются с поступающими заявками.

Агент должен корректно обрабатывать ситуацию, когда при старте не смог соединиться с сервером.

Агент должен корректно обрабатывать ситуацию, когда при отправке результатов сборки не смог соединиться с сервером.

Что является корректным поведением в этих случаях решите самостоятельно.

Опишите в файле README, какие решения приняли и почему именно такие.